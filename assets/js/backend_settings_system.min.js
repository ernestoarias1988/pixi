!function(){"use strict";function e(){}e.prototype.save=function(e){var a=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_save_settings",t={csrfToken:GlobalVariables.csrfToken,settings:JSON.stringify(e),type:BackendSettings.SETTINGS_SYSTEM};$.post(a,t).done(function(){Backend.displayNotification(EALang.settings_saved),$("#header-logo span").text($("#company-name").val());var e=$("#book-advance-timeout").val(),a=Math.floor(e/60),t=e%60;$("#book-advance-timeout-helper").text(EALang.book_advance_timeout_hint.replace("{$limit}",("0"+a).slice(-2)+":"+("0"+t).slice(-2))),GlobalVariables.timeFormat=$("#time-format").val(),GlobalVariables.firstWeekday=$("#first-weekday").val();var n=BackendSettings.wp.get();BackendSettings.wp.setup(n),BackendSettings.wp.timepickers(!1)})},e.prototype.get=function(){var t=[];return $("#general").find("input, select").not("input:checkbox").each(function(e,a){t.push({name:$(a).attr("data-field"),value:$(a).val()})}),t.push({name:"customer_notifications",value:$("#customer-notifications").prop("checked")?"1":"0"}),t.push({name:"require_captcha",value:$("#require-captcha").prop("checked")?"1":"0"}),t.push({name:"require_phone_number",value:$("#require-phone-number").prop("checked")?"1":"0"}),t.push({name:"display_any_provider",value:$("#display-any-provider").prop("checked")?"1":"0"}),t.push({name:"company_working_plan",value:JSON.stringify(BackendSettings.wp.get())}),t.push({name:"book_advance_timeout",value:$("#book-advance-timeout").val()}),t.push({name:"display_cookie_notice",value:$("#display-cookie-notice").prop("checked")?"1":"0"}),t.push({name:"cookie_notice_content",value:$("#cookie-notice-content").trumbowyg("html")}),t.push({name:"display_terms_and_conditions",value:$("#display-terms-and-conditions").prop("checked")?"1":"0"}),t.push({name:"terms_and_conditions_content",value:$("#terms-and-conditions-content").trumbowyg("html")}),t.push({name:"display_privacy_policy",value:$("#display-privacy-policy").prop("checked")?"1":"0"}),t.push({name:"privacy_policy_content",value:$("#privacy-policy-content").trumbowyg("html")}),t},e.prototype.validate=function(){$("#general .has-error").removeClass("has-error");try{var t=!1;if($("#general .required").each(function(e,a){$(a).val()||($(a).closest(".form-group").addClass("has-error"),t=!0)}),t)throw new Error(EALang.fields_are_required);if(!GeneralFunctions.validateEmail($("#company-email").val()))throw $("#company-email").closest(".form-group").addClass("has-error"),new Error(EALang.invalid_email);return!0}catch(e){return Backend.displayNotification(e.message),!1}},window.SystemSettings=e}();